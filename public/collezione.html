<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>La Mia Collezione</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="/manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js');
  }
</script>
</head>
<body>
  <script>
    (function() {
      const tema = localStorage.getItem('tema') || 'light';
      document.documentElement.setAttribute('data-theme', tema);
    })();
  </script>
  <button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebar()">
  <span></span>
  <span></span>
  <span></span>
</button>

<div class="sidebar">
    <h2>SW Archive</h2>
  
  <nav>
      <a href="collezione.html" class="active">La Mia Collezione</a>
      <a href="chi-siamo.html">â„¹ï¸ Chi Siamo</a>
      <a href="statistiche.html">Statistiche</a>
      <a href="amici.html">ğŸ‘¥ Amici</a>
      <a href="attivita.html">ğŸ“ AttivitÃ </a> 
      <a href="profilo.html">ğŸ‘¤ Profilo</a>
      <a href="admin.html" id="linkAdmin" style="display:none;">Gestione Contenuti</a>
      <a href="users.html" id="linkUsers" style="display:none;">ğŸ‘¥ Gestione Utenti</a>
      <a href="log-admin.html" id="linkLogAdmin" style="display:none;">ğŸ“Š Log Utenti</a>
    </nav>
  </div>
<div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>


  <div class="main-content">
    <div class="header">
      <h1>La Mia Collezione</h1>
      <p id="nomeUtente"></p>
    </div>


    <!-- FILTRI E RICERCA -->
    <div class="filtri-container">
      <div class="ricerca-box">
        <input 
          type="text" 
          id="ricercaInput" 
          placeholder="ğŸ” Cerca lattina..." 
          onkeyup="applicaFiltri()"
        >
      </div>

      <div class="filtro-categorie">
        <label>Categorie:</label>
        <div class="categorie-controls">
          <button class="btn-small" onclick="selezionatutte()">Seleziona tutte</button>
          <button class="btn-small" onclick="deselezionatutte()">Deseleziona tutte</button>
        </div>
        <div id="categorieCheckboxes"></div>
      </div>

      <div class="filtri-box">
        <div class="filtro-stato">
          <label>Stato:</label>
          <select id="filtroStato" onchange="applicaFiltri()">
            <option value="">Tutte</option>
            <option value="possedute">Possedute</option>
            <option value="mancanti">Mancanti</option>
          </select>
        </div>
      </div>
    </div>


    <div id="collezioneContainer" class="collezione-container">
      <p>Caricamento...</p>
    </div>
  </div>


<!-- THEME DRAWER (estraibile) -->
<div class="theme-drawer" id="themeDrawer">
  <button class="theme-drawer-toggle" onclick="toggleThemeDrawer()">ğŸ¨</button>
  
  <div class="theme-drawer-content">
    <h4>Tema</h4>
    <div class="theme-buttons">
      <button class="theme-btn light active" onclick="cambiaTema('light')" title="Light"></button>
      <button class="theme-btn dark" onclick="cambiaTema('dark')" title="Dark"></button>
      <button class="theme-btn green" onclick="cambiaTema('green')" title="Green"></button>
      <button class="theme-btn purple" onclick="cambiaTema('purple')" title="Purple"></button>
    </div>
  </div>
</div>

<!-- LOG ATTIVITÃ€ -->
<div id="logSection" class="log-section" style="display: none;">
  <h3>ğŸ“ AttivitÃ  Recente</h3>
  <div id="logContainer" class="log-container">
    <p>Nessuna attivitÃ </p>
  </div>
</div>


  <!-- MODAL IMMAGINE -->
  <div id="modalImmagine" class="modal-img" onclick="chiudiModalImmagine()">
    <span class="close-img">&times;</span>
    <img id="immagineModal" src="" alt="" class="img-modal-content">
  </div>

  <!-- Pulsante torna su -->
<button class="scroll-to-top" id="scrollToTop" onclick="scrollToTop()">
  â†‘
</button>


<button id="scrollToTop" style="
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 60px;
  background: #ff4444;
  color: white;
  border: none;
  border-radius: 50%;
  font-size: 28px;
  font-weight: bold;
  z-index: 99999;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.3s;
" onclick="window.scrollTo({top:0,behavior:'smooth'})">
â†‘
</button>

<script>
window.addEventListener('scroll', () => {
  const btn = document.getElementById('scrollToTop');
  if (window.scrollY > 300) {
    btn.style.opacity = '1';
  } else {
    btn.style.opacity = '0';
  }
});
</script>

  <script src="config.js"></script>
  <script src="theme.js"></script>
  <script src="sidebar.js"></script>
  <script src="collezione.js"></script>
</body>
</html>
