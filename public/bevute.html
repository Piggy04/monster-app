<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monster Bevute</title>
  <link rel="icon" href="favicon.ico">
  <link rel="stylesheet" href="style.css">
</head>
<script>
function apriModalImmagine(src) {
  const modal = document.createElement('div');
  modal.innerHTML = `
    <div class="modal-img active" onclick="this.remove()">
      <span class="close-img" onclick="event.stopPropagation(); this.parentElement.remove()">&times;</span>
      <img src="${src}" class="img-modal-content">
    </div>
  `;
  document.body.appendChild(modal.firstElementChild);
}
</script>

<body>
  <button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebar()">
    <span></span><span></span><span></span>
  </button>
  
  <div class="sidebar">
    <h2>SW Archive</h2>
    <nav>
      <a href="collezione.html">La Mia Collezione</a>
      <a href="chi-siamo.html">â„¹ï¸ Chi Siamo</a>
      <a href="profilo.html">ğŸ‘¤ Profilo</a>
      <a href="bevute.html" class="active">ğŸº Monster Bevute</a>
      <a href="amici.html">ğŸ‘¥ Amici</a>
      <a href="attivita.html">ğŸ“ AttivitÃ </a>
      <a href="admin.html" id="linkAdmin" style="display:none;">Gestione Contenuti</a>
      <a href="users.html" id="linkUsers" style="display:none;">ğŸ‘¥ Gestione Utenti</a>
      <a href="log-admin.html" id="linkLogAdmin" style="display:none;">ğŸ“Š Log Utenti</a>
    </nav>
  </div>
  <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

  <div class="main-content">
    <div class="header">
      <h1>ğŸº Monster Bevute</h1>
      <p id="nomeUtente"></p>
    </div>

    <!-- âœ… STATISTICHE TOTALI -->
    <div class="stats-bevute-container">
      <div class="stat-card-bevuta">
        <div class="stat-icon">ğŸº</div>
        <div class="stat-value" id="statTotali">0</div>
        <div class="stat-label">Bevute Totali</div>
      </div>
      
      <div class="stat-card-bevuta">
        <div class="stat-icon">âš¡</div>
        <div class="stat-value" id="statCaffeina">0</div>
        <div class="stat-label">mg Caffeina</div>
      </div>
      
      <div class="stat-card-bevuta">
        <div class="stat-icon">ğŸ”¥</div>
        <div class="stat-value" id="statCalorie">0</div>
        <div class="stat-label">kcal Totali</div>
      </div>
      
      <div class="stat-card-bevuta">
        <div class="stat-icon">ğŸ¬</div>
        <div class="stat-value" id="statZuccheri">0</div>
        <div class="stat-label">g Zuccheri</div>
      </div>
    </div>

    <!-- Controlli bevute -->
    <div class="filtri-container">
      <div style="display: flex; gap: 12px; flex-wrap: wrap; align-items: center;">
        <div class="ricerca-box" style="flex: 1; min-width: 200px;">
          <input type="text" id="ricercaBevuta" placeholder="ğŸ” Cerca bevuta..." oninput="applicaFiltri()">
        </div>
        
        <button class="btn-large" onclick="apriModalNuovaBevuta()" style="background: var(--gradient-primary);">
          â• Aggiungi Monster
        </button>
      </div>
      
      <!-- âœ… FILTRI TEMPORALI -->
      <div class="filtri-box" style="margin-top: 16px;">
        <label>Periodo:</label>
        <button class="btn-small active" id="btnTutto" onclick="filtraPeriodo('tutto')">Tutto</button>
        <button class="btn-small" id="btnOggi" onclick="filtraPeriodo('oggi')">Oggi</button>
        <button class="btn-small" id="btnSettimana" onclick="filtraPeriodo('settimana')">Settimana</button>
        <button class="btn-small" id="btnMese" onclick="filtraPeriodo('mese')">Mese</button>
      </div>
      
      <!-- âœ… ORDINAMENTO -->
      <div class="filtri-box" style="margin-top: 12px;">
        <label>Ordina per:</label>
        <select id="selectOrdinamento" onchange="applicaFiltri()">
          <option value="data-desc">Data (recente)</option>
          <option value="data-asc">Data (vecchia)</option>
          <option value="categoria">Categoria</option>
        </select>
      </div>
    </div>

    <!-- MODAL AGGIUNGI BEVUTA -->
    <div id="modalNuovaBevuta" class="modal" style="display:none;">
      <div class="modal-content">
        <span class="close" onclick="chiudiModalNuovaBevuta()">&times;</span>
        <h2>Aggiungi Bevuta</h2>
        
        <form id="formNuovaBevuta">
          <input type="hidden" id="selectVariante">
          
          <label>Cerca Monster:</label>
          <input type="text" id="ricercaVariante" oninput="filtraVarianti()" placeholder="Es: Original, Ultra White...">
          <div id="risultatiRicerca" style="display:none;"></div>
          
          <label>Note (opzionale):</label>
          <textarea id="inputNote" placeholder="Es: Buonissima!"></textarea>
          
          <button type="submit" class="btn-primary">Salva Bevuta</button>
        </form>
      </div>
    </div>

    <div id="bevuteContainer" class="log-container">
      <p>Caricamento...</p>
    </div>
  </div>

  <script src="config.js"></script>
  <script src="theme.js"></script>
  <script src="sidebar.js"></script>
  <script src="utils.js"></script>
  <script src="bevute.js"></script>
</body>
</html>
